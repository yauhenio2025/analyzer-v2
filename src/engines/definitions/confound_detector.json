{
  "engine_key": "confound_detector",
  "engine_name": "Confound Detector",
  "description": "Identifies potential confounding variables in causal claims. Detects third variables that might explain observed relationships, assesses control adequacy, and generates alternative explanations. Essential for distinguishing causation from correlation.",
  "version": 1,
  "category": "methodology",
  "kind": "synthesis",
  "reasoning_domain": "methodology",
  "researcher_question": "What confounding variables might explain these findings?",
  "extraction_prompt": "\nYou are detecting CONFOUNDING VARIABLES that might provide alternative\nexplanations for observed relationships.\n\n## WHAT IS CONFOUNDING?\n\nA confound is a third variable (Z) that:\n1. Affects the supposed cause (X)\n2. Affects the supposed effect (Y)\n3. Creates a spurious relationship between X and Y\n\nIf Z is not controlled, we might mistake correlation for causation.\n\nExample:\n- Claim: Ice cream sales (X) cause drownings (Y)\n- Confound: Summer heat (Z) causes both ice cream sales AND swimming\n\n## YOUR TASK\n\n### STEP 1: IDENTIFY CAUSAL CLAIMS\nWhat cause-effect relationships are claimed?\n- What is X (the cause)?\n- What is Y (the effect)?\n- How strong is the claim? (Causes vs. associated with)\n- What type of evidence supports it?\n\n### STEP 2: GENERATE POTENTIAL CONFOUNDERS\nFor each causal claim, brainstorm: What else could explain this?\n\n**Common confounders to consider:**\n- Demographic factors (age, gender, education, income)\n- Geographic factors (region, urban/rural)\n- Temporal factors (time trends, seasonality)\n- Selection effects (who chose to be in the study)\n- Common causes (third factor driving both)\n- Reverse causation (Y causes X, not X causes Y)\n\nFor each potential confounder:\n- How does it affect the supposed cause?\n- How does it affect the supposed effect?\n- How plausible is this alternative explanation?\n\n### STEP 3: ASSESS CONTROL ADEQUACY\nFor each confounder:\n- Was it controlled for?\n- If yes, how? (randomization, matching, statistical control)\n- Is the control adequate?\n\n### STEP 4: GENERATE ALTERNATIVE EXPLANATIONS\nCombine confounders into coherent alternative explanations:\n- What if the relationship is entirely due to confounders?\n- What evidence would distinguish causal from confounded?\n\n### STEP 5: ASSESS CAUSAL INFERENCE VALIDITY\nFor each claim:\n- How valid is the causal inference?\n- What are the key threats?\n- Should we accept causal interpretation?\n\n\n## OUTPUT GUIDANCE\n\nBe specific about mechanisms. \"There might be confounders\" is not useful.\n\"Socioeconomic status affects both X and Y through these mechanisms...\" is useful.\n",
  "curation_prompt": "\nYou are synthesizing confound detection across multiple sources.\n\n\n## SYNTHESIS TASKS\n\n### 1. AGGREGATE CONFOUNDERS\n- What confounders appear across multiple claims?\n- Are there systematic confounding patterns?\n\n### 2. ASSESS CONTROL PATTERNS\n- Are confounders consistently controlled?\n- What's the typical control adequacy?\n\n### 3. EVALUATE OVERALL CAUSAL CONFIDENCE\n- Which causal claims survive confound analysis?\n- Which are weakened or refuted?\n\n## OUTPUT GUIDANCE\n\nCreate assessment of which causal claims warrant confidence and which\nare potentially confounded.\n",
  "concretization_prompt": "\nTransform the confound analysis into actionable assessment:\n\n1. **CAUSAL CLAIMS SUMMARY**\n   ```\n   | Claim | X \u2192 Y | Evidence Type | Validity | Key Confounders |\n   |-------|-------|---------------|----------|-----------------|\n   | C1    | ...   | Observational | Weak     | CF1, CF2        |\n   ```\n\n2. **CONFOUNDERS IDENTIFIED**\n   ```\n   | Confounder | Affects Claims | Controlled? | Adequacy |\n   |------------|----------------|-------------|----------|\n   | CF1: SES   | C1, C3, C5     | Partially   | Questionable |\n   ```\n\n3. **CONFOUNDER DETAILS**\n   ```\n   Claim: [X \u2192 Y]\n   Confounder: [Z]\n   How Z affects X: [Mechanism]\n   How Z affects Y: [Mechanism]\n   Why this matters: [Implication]\n   Controlled: [Yes/No/Partially]\n   ```\n\n4. **ALTERNATIVE EXPLANATIONS**\n   - For claim [C1]: [Alternative explanation]\n   - Plausibility: [Assessment]\n   - Would distinguish: [What evidence needed]\n\n5. **CAUSAL VALIDITY ASSESSMENT**\n   ```\n   | Claim | Validity | Recommendation |\n   |-------|----------|----------------|\n   | C1    | Weak     | Correlational only |\n   | C2    | Moderate | Accept with caveats |\n   ```\n\n6. **BOTTOM LINE**\n   [One paragraph: Which causal claims are trustworthy? What confounds\n   undermine which claims? What additional evidence is needed?]\n",
  "canonical_schema": {
    "causal_claims": [
      {
        "claim_id": "string - C1, C2, etc.",
        "claimed_cause": "string - X",
        "claimed_effect": "string - Y",
        "claim_strength": "causes | leads_to | associated_with | correlates_with",
        "evidence_type": "experimental | quasi_experimental | observational | correlational",
        "source": "string - where claim appears"
      }
    ],
    "potential_confounders": [
      {
        "confounder_id": "string - CF1, CF2, etc.",
        "claim_id": "string - which claim this confounds",
        "confounder_name": "string - the confounding variable",
        "how_affects_cause": "string - how it influences X",
        "how_affects_effect": "string - how it influences Y",
        "mechanism": "string - why this creates spurious relationship",
        "plausibility": "highly_plausible | plausible | possible | speculative",
        "controlled_for": "yes | partially | no | unclear",
        "if_controlled_how": "string - control method if applicable",
        "control_adequacy": "adequate | questionable | inadequate | not_controlled"
      }
    ],
    "alternative_explanations": [
      {
        "alternative_id": "string",
        "claim_id": "string",
        "alternative": "string - different explanation for findings",
        "confounders_involved": [
          "string - confounder_ids"
        ],
        "plausibility": "more_plausible | equally_plausible | less_plausible",
        "what_would_distinguish": "string - evidence that would differentiate"
      }
    ],
    "causal_inference_assessment": [
      {
        "claim_id": "string",
        "inference_validity": "strong | moderate | weak | very_weak",
        "key_threats": [
          "string - main confounding concerns"
        ],
        "uncontrolled_confounders": [
          "string - confounder_ids"
        ],
        "recommendation": "accept_causal | accept_with_caveats | correlational_only | reject",
        "rationale": "string"
      }
    ],
    "common_confounders": [
      {
        "confounder": "string",
        "claims_affected": [
          "string - claim_ids"
        ],
        "pattern": "string - what this reveals"
      }
    ],
    "meta": {
      "claims_analyzed": "number",
      "confounders_identified": "number",
      "claims_with_strong_validity": "number",
      "claims_with_weak_validity": "number",
      "overall_causal_confidence": "high | medium | low"
    }
  },
  "extraction_focus": [
    "causal_claims",
    "potential_confounders",
    "control_strategies",
    "alternative_explanations",
    "causal_validity"
  ],
  "primary_output_modes": [
    "structured_text_report",
    "table"
  ],
  "paradigm_keys": [],
  "source_file": "analyzer/src/engines/confound_detector.py"
}
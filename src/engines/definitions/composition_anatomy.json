{
  "engine_key": "composition_anatomy",
  "engine_name": "Composition Anatomy Mapper",
  "description": "Decomposes complex legislation, bills, or policy packages into components. Maps structural relationships between provisions, identifies implementation mechanisms, enforcement provisions, and reveals how different stakeholders are affected by each component.",
  "version": 1,
  "category": "market",
  "kind": "relational",
  "reasoning_domain": "composition",
  "researcher_question": "What are the component parts of this legislation/policy and how do they relate?",
  "canonical_schema": {
    "policy_documents": [
      {
        "document_id": "string",
        "document_name": "string",
        "document_type": "legislation | bill | regulation | directive | executive_order | treaty | framework",
        "jurisdiction": "string",
        "status": "proposed | enacted | amended | repealed",
        "date": "string",
        "primary_purpose": "string",
        "source_articles": [
          "string"
        ]
      }
    ],
    "structural_components": [
      {
        "component_id": "string",
        "document_id": "string",
        "component_type": "title | chapter | section | article | clause | provision | schedule | annex",
        "component_name": "string",
        "parent_component": "string or null",
        "level": "number (0 = top level)",
        "summary": "string",
        "legal_text_excerpt": "string or null",
        "child_components": [
          "component_id"
        ],
        "source_articles": [
          "string"
        ]
      }
    ],
    "provisions": [
      {
        "provision_id": "string",
        "component_id": "string",
        "provision_type": "substantive | procedural | definitional | enforcement | transitional | delegated_authority",
        "provision_name": "string",
        "description": "string",
        "mandatory": "boolean",
        "conditions": [
          "string"
        ],
        "triggers": [
          "string (events that activate this provision)"
        ],
        "related_provisions": [
          "provision_id"
        ],
        "source_articles": [
          "string"
        ]
      }
    ],
    "implementation_mechanisms": [
      {
        "mechanism_id": "string",
        "provision_id": "string",
        "mechanism_type": "reporting | licensing | registration | inspection | audit | certification | notification",
        "responsible_body": "string",
        "timeline": "string",
        "requirements": [
          "string"
        ],
        "compliance_indicators": [
          "string"
        ],
        "source_articles": [
          "string"
        ]
      }
    ],
    "enforcement_provisions": [
      {
        "enforcement_id": "string",
        "provision_id": "string",
        "enforcement_type": "penalty | sanction | injunction | license_revocation | criminal | civil | administrative",
        "enforcing_authority": "string",
        "penalty_range": "string or null",
        "due_process": [
          "string"
        ],
        "appeal_mechanism": "string or null",
        "source_articles": [
          "string"
        ]
      }
    ],
    "exceptions_and_carveouts": [
      {
        "exception_id": "string",
        "provision_id": "string",
        "exception_type": "exemption | safe_harbor | grandfathering | de_minimis | national_security | public_interest",
        "description": "string",
        "beneficiaries": [
          "string"
        ],
        "conditions_for_exception": [
          "string"
        ],
        "duration": "string or null",
        "source_articles": [
          "string"
        ]
      }
    ],
    "stakeholder_impacts": [
      {
        "impact_id": "string",
        "component_id": "string",
        "stakeholder": "string",
        "stakeholder_type": "regulated_entity | regulator | beneficiary | third_party | consumer | industry",
        "impact_type": "obligation | right | benefit | burden | cost | opportunity",
        "impact_description": "string",
        "severity": "high | medium | low",
        "source_articles": [
          "string"
        ]
      }
    ],
    "inter_component_relationships": [
      {
        "relationship_id": "string",
        "from_component": "string",
        "to_component": "string",
        "relationship_type": "depends_on | modifies | supersedes | cross_references | conflicts_with | implements",
        "description": "string",
        "source_articles": [
          "string"
        ]
      }
    ],
    "meta": {
      "total_documents": "number",
      "total_components": "number",
      "total_provisions": "number",
      "max_hierarchy_depth": "number",
      "exception_count": "number",
      "enforcement_mechanism_count": "number",
      "stakeholders_identified": "number",
      "components_by_type": {
        "type": "number"
      }
    }
  },
  "extraction_focus": [
    "provisions",
    "clauses",
    "mechanisms",
    "enforcement",
    "exceptions",
    "components",
    "structure",
    "stakeholder_impact"
  ],
  "primary_output_modes": [
    "gemini_hierarchy_diagram",
    "structured_text_report",
    "table",
    "mermaid"
  ],
  "paradigm_keys": [],
  "source_file": "analyzer/src/engines/composition_anatomy.py",
  "stage_context": {
    "framework_key": null,
    "additional_frameworks": [],
    "extraction": {
      "analysis_type": "composition anatomy",
      "analysis_type_plural": "composition anatomys",
      "core_question": "What are the component parts of this legislation/policy and how do they relate?",
      "extraction_steps": [
        "Read the document carefully to understand the context",
        "Identify key items matching the analysis type",
        "Extract relationships between items",
        "Build the relationship graph",
        "Verify completeness and accuracy"
      ],
      "key_fields": {},
      "id_field": "composition_id",
      "key_relationships": [
        "depends_on",
        "references",
        "conflicts_with"
      ],
      "special_instructions": null
    },
    "curation": {
      "item_type": "composition anatomy",
      "item_type_plural": "composition anatomys",
      "consolidation_rules": [
        "CONSOLIDATE DOCUMENTS: Build complete picture of each law/policy",
        "BUILD COMPONENT HIERARCHIES: - Map parent-child relationships between components",
        "CATALOG PROVISIONS: - Group by type (substantive, procedural, enforcement, etc.)",
        "MAP IMPLEMENTATION: - Link mechanisms to provisions they implement",
        "DOCUMENT ENFORCEMENT: - Link enforcement to substantive provisions",
        "IDENTIFY EXCEPTIONS: - Map all carve-outs and exemptions"
      ],
      "cross_doc_patterns": [
        "shared_items",
        "contested_items",
        "response_network"
      ],
      "synthesis_outputs": [
        "consolidated_item_list",
        "relationship_map",
        "cross_document_dynamics"
      ],
      "special_instructions": null
    },
    "concretization": {
      "id_examples": [
        {
          "from": "D1",
          "to": "EU AI Act (2024)"
        },
        {
          "from": "C1",
          "to": "Title II - Prohibited AI Practices"
        },
        {
          "from": "P1",
          "to": "Art. 5 - Social Scoring Prohibition"
        }
      ],
      "naming_guidance": "",
      "recommended_table_types": [],
      "recommended_visual_patterns": []
    },
    "audience_vocabulary": {
      "researcher": {},
      "analyst": {},
      "executive": {},
      "activist": {}
    },
    "skip_concretization": false
  }
}
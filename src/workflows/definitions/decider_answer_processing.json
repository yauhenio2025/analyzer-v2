{
  "workflow_key": "decider_answer_processing",
  "workflow_name": "Decider Answer Processing",
  "description": "Post-answer processing pipeline. After a user submits an answer, this workflow updates synthesis state, draws implications, checks for handoff conditions, and triggers the next question generation wave.",
  "category": "decision_support",
  "version": 1,
  "phases": [
    {
      "phase_number": 1,
      "phase_name": "Category Selection",
      "phase_description": "Determine what category/bucket the answer content belongs to for item organization",
      "base_phase_description": "Determine what category/bucket the answer content belongs to for item organization",
      "function_key": "category_selection",
      "engine_key": null,
      "prompt_template": null,
      "requires_external_docs": false,
      "caches_result": false,
      "depends_on_phases": [],
      "output_schema": {
        "category": "string",
        "confidence": "number"
      }
    },
    {
      "phase_number": 2,
      "phase_name": "Emergent Synthesis Update",
      "phase_description": "Update the rolling synthesis with insights from the new answer",
      "base_phase_description": "Update the rolling synthesis with insights from the new answer",
      "function_key": "emergent_synthesis",
      "engine_key": null,
      "prompt_template": null,
      "requires_external_docs": false,
      "caches_result": true,
      "depends_on_phases": [
        1
      ],
      "output_schema": {
        "synthesis_delta": "object",
        "new_themes": "array"
      }
    },
    {
      "phase_number": 3,
      "phase_name": "Implication Drawing",
      "phase_description": "Draw implications from the answer and updated synthesis, potentially generating items for the other track",
      "base_phase_description": "Draw implications from the answer and updated synthesis, potentially generating items for the other track",
      "function_key": "implication_drawing",
      "engine_key": null,
      "prompt_template": null,
      "requires_external_docs": false,
      "caches_result": true,
      "depends_on_phases": [
        2
      ],
      "output_schema": {
        "implications": "array",
        "cross_track_items": "array"
      }
    },
    {
      "phase_number": 4,
      "phase_name": "Handoff Detection",
      "phase_description": "Check if the current track has sufficient coverage and should hand off to the other track",
      "base_phase_description": "Check if the current track has sufficient coverage and should hand off to the other track",
      "function_key": "handoff_detection",
      "engine_key": null,
      "prompt_template": null,
      "requires_external_docs": false,
      "caches_result": false,
      "depends_on_phases": [
        2
      ],
      "output_schema": {
        "should_handoff": "boolean",
        "handoff_reason": "string",
        "suggested_track": "string"
      }
    },
    {
      "phase_number": 5,
      "phase_name": "Track Weight Update",
      "phase_description": "Reassess the relative weights of IDEAS vs PROCESS tracks based on current state",
      "base_phase_description": "Reassess the relative weights of IDEAS vs PROCESS tracks based on current state",
      "function_key": "track_weight_suggestion",
      "engine_key": null,
      "prompt_template": null,
      "requires_external_docs": false,
      "caches_result": false,
      "depends_on_phases": [
        2
      ],
      "output_schema": {
        "ideas_weight": "number",
        "process_weight": "number",
        "reasoning": "string"
      }
    },
    {
      "phase_number": 6,
      "phase_name": "Grid Analysis Update",
      "phase_description": "Update the strategy grid analysis with the new answer data",
      "base_phase_description": "Update the strategy grid analysis with the new answer data",
      "function_key": "grid_analyzer_interview",
      "engine_key": null,
      "prompt_template": null,
      "requires_external_docs": false,
      "caches_result": true,
      "depends_on_phases": [
        1
      ],
      "output_schema": {
        "updated_scores": "object",
        "new_coverage": "string"
      }
    }
  ],
  "required_inputs": [
    "answer_data",
    "session_context",
    "synthesis_state"
  ],
  "optional_inputs": [
    "previous_question"
  ],
  "output_description": "Fully processed answer with updated synthesis, implications, handoff assessment, and grid scores",
  "estimated_phases": 6,
  "source_project": "decider-v2"
}